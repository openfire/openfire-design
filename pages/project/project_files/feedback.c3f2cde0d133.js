// Generated by CoffeeScript 1.3.3
(function() {
  var FeedbackController;

  FeedbackController = (function() {

    function FeedbackController() {
      var _this = this;
      this.slider = null;
      this.init = function() {
        $('#show-feedback-btn').click(_this.showFeedback);
        $('#hide-feedback-btn').click(_this.hideFeedback);
        return $('#submit-feedback-btn').click(_this.submitFeedback);
      };
      this.showFeedback = function() {
        $('#footer-container').height('300px');
        $('body').animate({
          scrollTop: $(document).height()
        }, 'easeOutQuint');
        $('#show-feedback-btn').hide();
        return $('#hide-feedback-btn').show();
      };
      this.hideFeedback = function() {
        $('#footer-container').animate({
          height: '30px'
        }, 'easeOutQuint');
        $('#hide-feedback-btn').hide();
        return $('#show-feedback-btn').show();
      };
      this.submitFeedback = function() {
        var postData;
        postData = 'feedback=' + encodeURIComponent($('#feedback-content').val());
        $('#feedback-saved').hide();
        $('#feedback-error').html('').hide();
        return $.ajax({
          type: 'POST',
          url: '/_api/v1/feedback/',
          data: postData,
          success: function(response) {
            $('#feedback-saved').show();
            $('#submit-feedback-btn').attr('disabled', 'disabled');
            return $('#submit-feedback-btn').addClass('disabled');
          },
          error: function(response) {
            return $('#feedback-error').html(response.responseText).show();
          }
        });
      };
    }

    return FeedbackController;

  })();

  window.FeedbackController = FeedbackController;

  $.openfire.controller_classes.feedback = FeedbackController;

}).call(this);
